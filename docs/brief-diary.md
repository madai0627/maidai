# Project Brief: 日记模块 (Diary Module)

> 📅 创建日期: 2024-12-17  
> 📊 版本: v1.0  
> 👤 作者: Mary (Business Analyst)

---

## 1. 执行摘要 (Executive Summary)

**项目名称：** 日记模块 (Diary Module)

**产品概念：**
为 maidai 个人管理系统新增一个私密、温暖的日记功能，让用户能够记录生活点滴、追踪情绪变化，并通过数据可视化回顾个人成长轨迹。

**核心问题：**
用户缺乏一个与现有个人管理工具深度整合的日记空间。市面上的日记App要么功能单一，要么独立于用户的学习、财务等生活数据之外，无法形成完整的个人数据画像。

**目标市场：**
- 已在使用 maidai 系统的现有用户
- 希望养成记录习惯、进行自我觉察的个人用户
- 追求数据可视化和回顾功能的"量化自我"爱好者

**核心价值主张：**
> 🎯 **一站式个人数据中心** —— 日记与学习、财务、照片等模块联动，形成完整的生活记录；情绪追踪与可视化帮助用户更好地认识自己。

---

## 2. 问题陈述 (Problem Statement)

### 当前痛点

**1. 记录分散，缺乏统一入口**
- 用户的生活记录散落在多个App中：备忘录、微信朋友圈、相册、记账软件
- 难以形成连贯的时间线，回顾时需要在多个平台间跳转
- 数据孤岛导致无法产生关联洞察

**2. 现有日记工具与生活数据割裂**
- 市面日记App（Day One、Journey等）功能完善但独立存在
- 用户在 maidai 记录了学习进度、财务支出、照片，但缺少"文字+情绪"维度
- 无法回答"我那天学了什么、花了多少钱、心情如何"这类完整问题

**3. 情绪追踪缺失或过于专业**
- 大多数日记App不提供情绪追踪
- 专业情绪追踪App（如 Daylio）过于聚焦情绪，缺少日记叙事
- 用户想要的是"轻量情绪标记 + 正常日记"的组合

**4. 坚持记录困难**
- 缺乏激励机制和成就感反馈
- 看不到自己的记录成果（如写作热力图、情绪趋势）
- 没有与其他习惯（学习、理财）形成正向循环

### 问题影响

| 影响维度 | 具体表现 |
|---------|---------|
| **时间成本** | 用户每天在多个App间切换，碎片化记录效率低 |
| **数据价值** | 分散的数据无法产生洞察，失去"量化自我"的意义 |
| **习惯养成** | 缺乏系统性支持，日记坚持率低，通常3周内放弃 |
| **情感连接** | 用户与自己过去的连接变弱，难以进行有效的自我反思 |

### 为什么现有方案不足

| 现有方案 | 不足之处 |
|---------|---------|
| **手机备忘录** | 无情绪标签、无可视化、无时间线、搜索困难 |
| **Day One/Journey** | 独立App，与学习财务数据割裂，付费订阅 |
| **Notion日记** | 功能强大但过于复杂，普通用户难以坚持 |
| **朋友圈/微博** | 公开社交属性，不适合私密记录 |
| **Daylio情绪App** | 只有情绪无日记叙事，过于简单 |

---

## 3. 解决方案 (Proposed Solution)

### 核心理念

**"轻量记录，深度洞察"**

提供一个简洁易用的日记入口，降低记录门槛；通过情绪追踪和数据可视化，让用户从日积月累的记录中获得自我认知的价值。

### 解决方案概述

```
┌─────────────────────────────────────────────────────────────┐
│                    📓 日记模块架构                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    │
│   │   快速记录   │    │   日记管理   │    │   数据洞察   │    │
│   │   ────────   │    │   ────────   │    │   ────────   │    │
│   │ • 今日一句   │    │ • 时间线列表 │    │ • 情绪曲线   │    │
│   │ • 情绪选择   │    │ • 日历视图   │    │ • 写作热力图 │    │
│   │ • 快捷标签   │    │ • 搜索过滤   │    │ • 月度回顾   │    │
│   └─────────────┘    └─────────────┘    └─────────────┘    │
│           │                  │                  │           │
│           └──────────────────┼──────────────────┘           │
│                              ▼                              │
│                    ┌─────────────────┐                      │
│                    │   模块联动层    │                      │
│                    │  ─────────────  │                      │
│                    │ 学习·财务·照片  │                      │
│                    └─────────────────┘                      │
└─────────────────────────────────────────────────────────────┘
```

### 核心功能设计

#### 1️⃣ 快速记录入口
- 3秒内开始写日记
- 情绪选择：😄 😊 😐 😢 😠
- 快捷标签：#工作 #学习 #生活

#### 2️⃣ 富文本日记编辑器
- 简洁模式：纯文本 + 基本格式（默认）
- 图片支持：拖拽/粘贴上传，自动压缩
- 天气位置：自动获取或手动选择

#### 3️⃣ 多视图浏览
- **时间线**：按时间倒序浏览
- **日历**：月度概览，直观看记录频率
- **搜索**：按关键词/标签/情绪筛选

#### 4️⃣ 情绪追踪可视化
- 情绪分布饼图
- 情绪趋势折线图
- 写作热力图

### 关键差异化优势

| 差异点 | 我们的方案 | 竞品现状 |
|-------|-----------|---------|
| **数据整合** | 日记与学习/财务/照片联动 | 独立App，数据孤岛 |
| **情绪追踪** | 轻量标记 + 可视化报告 | 要么没有，要么过于专业 |
| **激励机制** | 写作热力图 + 连续天数 + 成就 | 大多无激励设计 |
| **技术复用** | 复用现有UI组件和API模式 | - |

---

## 4. 目标用户 (Target Users)

### 主要用户群体：自我成长追求者

**用户画像：小林**

| 属性 | 描述 |
|------|------|
| **年龄** | 22-35岁 |
| **职业** | 学生、职场新人、知识工作者 |
| **特征** | 注重个人成长，有学习/阅读习惯 |
| **设备** | PC为主，手机为辅 |

**当前行为：**
- 已在使用 maidai 的题库或财务功能
- 偶尔在备忘录或朋友圈记录生活
- 尝试过日记App但因各种原因放弃
- 对"量化自我"概念感兴趣

**核心需求：**
- 📝 **记录生活**：想要一个私密的地方记录每天的想法和事件
- 🎯 **追踪情绪**：想了解自己的情绪模式，进行自我觉察
- 📊 **看到成果**：希望看到自己坚持记录的可视化成果
- 🔗 **整合数据**：希望日记能与学习、财务等记录关联

**痛点：**
- "每次想写日记，打开App就觉得要写很多，然后就放弃了"
- "记了一个月，但感觉没什么意义，看不到变化"
- "日记App和我的学习记录是分开的，很割裂"

### 次要用户群体：生活记录爱好者

| 属性 | 描述 |
|------|------|
| **年龄** | 18-30岁 |
| **特征** | 喜欢拍照、记录生活、注重仪式感 |
| **核心需求** | 图文并茂、私密空间、回顾往事、美观展示 |

---

## 5. 目标与成功指标 (Goals & Success Metrics)

### 业务目标

| # | 目标 | 衡量指标 | 目标值 |
|---|------|---------|--------|
| **O1** | 提升用户粘性 | 日活跃用户(DAU)增长率 | 上线后30天内 DAU +15% |
| **O2** | 增加使用时长 | 平均会话时长 | 从5分钟提升至8分钟 |
| **O3** | 形成使用习惯 | 周活跃用户留存率 | 首月 W1→W4 留存 >40% |
| **O4** | 模块协同效应 | 跨模块使用率 | 30%日记用户同时使用其他模块 |

### 关键绩效指标 (KPIs)

| KPI | 定义 | 目标 |
|-----|------|------|
| **日记创建数** | 每日新增日记总数 | 50篇/天 |
| **活跃记录者** | 月内写≥8篇日记的用户 | 100人 |
| **情绪标记率** | 带情绪标签的日记占比 | >90% |
| **图片附加率** | 带图片的日记占比 | >30% |
| **D1/D7/D30留存** | 次日/7日/30日回访率 | 50%/25%/15% |

---

## 6. MVP 范围 (MVP Scope)

### 核心功能（必须有）

| 功能 | 描述 | 验收标准 |
|------|------|---------|
| **📝 日记创建** | 用户可以新建日记，输入文字内容 | 支持标题(可选)+正文，最少1字可保存 |
| **😊 情绪选择** | 每篇日记必选一个情绪标签 | 5种情绪：😄开心/😊平静/😐一般/😢低落/😠烦躁 |
| **📅 日期选择** | 支持选择日记日期（可补写） | 默认今天，可选过去任意日期 |
| **🖼️ 图片上传** | 日记可附加图片 | 单篇最多9张，单张≤5MB |
| **📋 日记列表** | 时间线形式展示所有日记 | 倒序排列，分页/无限滚动 |
| **👁️ 日记详情** | 点击查看日记完整内容 | 展示全部信息 |
| **✏️ 日记编辑** | 修改已有日记 | 可修改所有字段 |
| **🗑️ 日记删除** | 删除日记 | 二次确认后删除 |
| **📊 情绪统计** | 展示情绪分布饼图 | 本月各情绪占比 |

### 优先级排序

```
P0 - 必须上线（核心闭环）
━━━━━━━━━━━━━━━━━━━━━━━━━━
 ✓ 日记 CRUD（增删改查）
 ✓ 情绪标签（5选1）
 ✓ 图片上传（复用照片墙能力）
 ✓ 时间线列表视图
 ✓ 基础情绪统计（饼图）

P1 - 尽快跟进（提升体验）
━━━━━━━━━━━━━━━━━━━━━━━━━━
 ○ 日历视图（月度概览）
 ○ 写作热力图（GitHub风格）
 ○ 自定义标签（#工作 #生活）
 ○ 全文搜索

P2 - 后续迭代（增强功能）
━━━━━━━━━━━━━━━━━━━━━━━━━━
 ○ 情绪趋势折线图
 ○ 天气记录
 ○ 位置标记
 ○ 月度报告自动生成
```

### 明确排除范围（MVP不做）

- ❌ 富文本编辑器（增加复杂度）
- ❌ Markdown支持
- ❌ 端到端加密
- ❌ 日记导出
- ❌ AI情绪分析
- ❌ 多端同步
- ❌ 社交分享
- ❌ 语音日记

### MVP 成功标准

| 维度 | 标准 |
|------|------|
| **功能完整** | 核心CRUD流程无阻断 |
| **性能达标** | 列表页加载 <2秒，写入 <1秒 |
| **体验流畅** | 新用户首篇日记 <60秒完成 |
| **用户接受** | 首周日活 >20人，D7留存 >20% |

### MVP 开发估算

| 模块 | 工作量 |
|------|--------|
| 后端API | 2-3天 |
| 数据库 | 0.5天 |
| 前端页面 | 4-5天 |
| 图片上传 | 1天 |
| 联调测试 | 2天 |
| **总计** | **约10天** |

---

## 7. MVP后愿景 (Post-MVP Vision)

### Phase 2 功能（MVP后1-2个月）

| 功能 | 描述 |
|------|------|
| **📅 日历视图** | 月历形式展示，有日记的日期显示情绪图标 |
| **🔥 写作热力图** | GitHub风格的365天记录热力图 |
| **🏷️ 标签系统** | 自定义标签管理，按标签筛选日记 |
| **🔍 全文搜索** | 关键词搜索日记内容 |
| **📈 情绪趋势图** | 30/90天情绪变化折线图 |

### Phase 3 功能（3-6个月）

| 功能 | 描述 |
|------|------|
| **📊 月度报告** | 自动生成月度总结 |
| **📆 去年今天** | 推送"去年今天"的日记回顾 |
| **🔗 模块联动** | 日记中显示当天学习/财务/照片摘要 |
| **📤 导出功能** | 导出为PDF/Markdown |

### 长期愿景（6-12个月）

- 🧠 **智能化**：AI情绪分析、智能摘要、写作建议
- 📱 **多端体验**：移动端H5、微信小程序
- 🔒 **隐私安全**：端到端加密、本地优先
- 🌍 **社交分享**：精选公开、时间胶囊

---

## 8. 技术考量 (Technical Considerations)

### 平台要求

| 项目 | 规格 |
|------|------|
| **目标平台** | Web（PC优先，响应式适配移动端） |
| **浏览器支持** | Chrome 90+, Firefox 88+, Safari 14+, Edge 90+ |
| **性能要求** | 列表页首屏 <2s，日记保存 <1s |

### 技术栈（与现有系统一致）

| 层级 | 技术选择 |
|------|---------|
| **前端框架** | Vue 3 + Composition API |
| **UI组件库** | Element Plus |
| **图表库** | ECharts |
| **路由** | Vue Router |
| **后端** | 现有后端架构 |
| **数据库** | 现有数据库 |

### 前端架构

```
src/views/diary/
  ├── Index.vue          # 日记首页入口
  ├── List.vue           # 日记列表（时间线）
  ├── Detail.vue         # 日记详情
  ├── Edit.vue           # 新建/编辑日记
  └── Stats.vue          # 情绪统计

src/api/diary.js         # 日记相关API

src/components/diary/
  ├── DiaryCard.vue      # 日记卡片
  ├── MoodSelector.vue   # 情绪选择器
  └── MoodChart.vue      # 情绪图表
```

### 数据库设计

```sql
CREATE TABLE diary (
  id            INT PRIMARY KEY AUTO_INCREMENT,
  user_id       INT NOT NULL,
  title         VARCHAR(200),
  content       TEXT NOT NULL,
  mood          VARCHAR(20) NOT NULL,   -- happy/good/neutral/sad/angry
  weather       VARCHAR(20),
  location      VARCHAR(100),
  diary_date    DATE NOT NULL,
  images        JSON,
  tags          JSON,
  created_at    DATETIME DEFAULT NOW(),
  updated_at    DATETIME DEFAULT NOW() ON UPDATE NOW(),
  
  INDEX idx_user_date (user_id, diary_date),
  INDEX idx_user_mood (user_id, mood)
);
```

### API 设计

| 接口 | 方法 | 路径 |
|------|------|------|
| 日记列表 | GET | `/api/diary/list` |
| 日记详情 | GET | `/api/diary/:id` |
| 创建日记 | POST | `/api/diary/create` |
| 更新日记 | PUT | `/api/diary/:id` |
| 删除日记 | DELETE | `/api/diary/:id` |
| 情绪统计 | GET | `/api/diary/stats/mood` |
| 日历数据 | GET | `/api/diary/calendar` |

---

## 9. 约束与假设 (Constraints & Assumptions)

### 约束条件

| 类型 | 约束 |
|------|------|
| **预算** | 无额外预算，使用现有资源 |
| **时间** | MVP目标2周内完成 |
| **人力** | 1人全栈开发 |
| **技术** | 必须使用现有技术栈 |

### 关键假设

| # | 假设 | 风险等级 |
|---|------|---------|
| A1 | 用户愿意在PC端写日记 | 中 |
| A2 | 5种情绪分类足够满足需求 | 低 |
| A3 | 情绪追踪功能能提升记录频率 | 中 |
| A4 | 纯文本编辑器用户可接受 | 中 |
| A5 | 现有用户有写日记的需求 | 高 |

---

## 10. 风险与待解决问题 (Risks & Open Questions)

### 关键风险

| 风险 | 影响 | 缓解措施 |
|------|------|---------|
| R1: 用户不愿在PC端写日记 | 高 | 设计简洁的移动端适配 |
| R2: 情绪追踪增加记录负担 | 中 | 情绪选择设为可选 |
| R3: 纯文本无法满足表达需求 | 中 | 快速迭代支持基础富文本 |
| R4: 日记数据隐私担忧 | 高 | 明确隐私政策；本地优先 |

### 待解决问题

| # | 问题 | 优先级 |
|---|------|--------|
| Q1 | 日记图片是否与照片墙共用存储？ | P0 |
| Q2 | 是否需要日记草稿自动保存功能？ | P1 |
| Q3 | 情绪标签是否允许用户自定义扩展？ | P2 |
| Q4 | 日记删除是软删除还是硬删除？ | P0 |

---

## 11. 附录 (Appendices)

### A. 竞品参考

| 产品 | 优点 | 缺点 | 借鉴点 |
|------|------|------|--------|
| Day One | 界面美观，功能完善 | 付费，与其他工具割裂 | 时间线UI设计 |
| Daylio | 情绪追踪专业 | 日记功能弱 | 情绪图表设计 |
| Notion | 灵活强大 | 过于复杂 | 标签系统 |
| Flomo | 低门槛 | 无情绪追踪 | 快速记录入口 |

### B. 情绪标签设计

```
核心5种情绪（MVP）
━━━━━━━━━━━━━━━━━━
😄 开心 (happy)    - 愉悦、兴奋、满足
😊 平静 (good)     - 安宁、放松、舒适  
😐 一般 (neutral)  - 普通、平淡
😢 低落 (sad)      - 难过、失落、沮丧
😠 烦躁 (angry)    - 生气、焦虑、烦闷
```

---

## 12. 下一步行动 (Next Steps)

### 立即行动项

| # | 行动 | 截止日期 |
|---|------|---------|
| 1 | 确认项目简报内容，锁定MVP范围 | 立即 |
| 2 | 创建数据库表结构 | Day 1 |
| 3 | 搭建前端路由和页面骨架 | Day 1-2 |
| 4 | 实现后端CRUD API | Day 2-3 |
| 5 | 完成日记列表和编辑页面 | Day 3-5 |
| 6 | 实现情绪统计图表 | Day 6-7 |
| 7 | 联调测试和Bug修复 | Day 8-9 |
| 8 | 内部测试和优化 | Day 10 |

### 开发交接说明

本项目简报为 **日记模块** 提供了完整的产品背景和需求定义。

**开发启动前请确认：**
- [ ] MVP功能范围已确认
- [ ] 技术方案无阻塞问题
- [ ] 数据库设计已评审
- [ ] UI设计稿/原型已准备（或使用本文档线框图）

**建议开发顺序：**
1. 后端API → 2. 日记CRUD页面 → 3. 情绪统计 → 4. 细节优化

---

*— End of Project Brief —*

