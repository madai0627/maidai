## 文档信息

- **文档名称**：学习模块错题复习与做题记录前端交互与界面规范
- **版本号**：V1.0
- **关联架构文档**：`docs/architecture/study-wrong-question-architecture.md`
- **关联 PRD**：`docs/study-wrong-question-prd.md`
- **撰写人**：（待填）
- **创建日期**：（待填）
- **状态**：草稿

---

## 一、信息架构 & 路由结构

> 目标：让学生在「学习」模块中，顺畅地完成：查看错题 → 复习错题 → 查看做题记录 → 查看统计图表。

### 1.1 顶层导航与入口

- 假设已有全局导航中包含「学习」入口，点击后进入 `/study` 学习首页。
- 学习首页核心入口卡片（卡片可点击、样式统一）：
  - **错题复习** → `/study/wrong-questions`
  - **做题记录** → `/study/records`
  - **学习数据** → `/study/stats`

### 1.2 路由一览

- `/study`：学习首页 `StudyHome`
- `/study/wrong-questions`：错题列表页 `WrongQuestionListPage`
- `/study/wrong-questions/practice`：错题练习页 `WrongQuestionPracticePage`
- `/study/records`：做题记录列表页 `ExerciseRecordListPage`
- `/study/records/:id`：做题记录详情页 `ExerciseRecordDetailPage`
- `/study/stats`：学习统计页 `StudyStatsPage`

---

## 二、通用 UI & 交互规范

> 本节是多个页面共享的规范，建议配合公共样式文件（如 `styles/study/index.scss`）实现。

### 2.1 布局与基础组件

- 页面统一结构：
  - 顶部：页面标题 + 可选副标题/说明。
  - 中部：筛选区域（如有） + 列表/图表主体。
  - 底部：分页（如有）。
- 推荐使用的通用组件（按你现有 UI 库替换）：
  - 搜索/筛选：`Form` + `Select` + `DatePicker` + `Button`
  - 列表：`Table` 或自定义 `List`
  - 图表：统一封装 `Chart` 组件（内部基于 ECharts / AntV 等）
  - 分页：`Pagination`

### 2.2 状态处理（加载 / 空 / 错误）

- **加载中**
  - 使用统一骨架屏或 loading 动画，覆盖列表/图表区域。
- **空状态**
  - 无数据时显示统一空状态组件，包含图标 + 文案 + CTA 按钮（可选）。
  - 示例文案：
    - 错题列表空：`你还没有产生错题，先去做几道题试试吧～`
    - 做题记录空：`最近还没有做题记录，去开始一次练习吧！`
    - 学习数据空：`暂无足够数据生成统计，建议先完成几次练习。`
- **错误状态**
  - 接口异常：显示提示条/气泡：`数据加载失败，请稍后重试`，保留重试按钮。

### 2.3 文案与交互细节

- 按钮命名简洁直观，如：`开始练习`、`查看详情`、`标记为已掌握`。
- 避免技术术语，使用学生易懂的语言。
- 关键操作（批量修改状态等）需二次确认对话框。

---

## 三、学习首页 `StudyHome`

### 3.1 页面目标

- 为学生提供学习模块的「概览与主入口」：
  - 快捷进入错题复习、做题记录、学习数据。
  - 一眼看到近期的做题趋势与薄弱知识点。

### 3.2 布局结构

- 顶部区域：
  - 标题：`学习中心`
  - 副标题：`查看你的错题、做题记录和学习数据`
- 中间区域：
  - 三个功能卡片（平铺/栅格）：
    - 错题复习卡片：简要统计（错题总数、待复习数）
    - 做题记录卡片：最近一次做题时间、最近正确率
    - 学习数据卡片：平均正确率、近7天趋势简述
- 底部区域：
  - 小图表：最近 7 天正确率折线图。
  - 文本列表：薄弱知识点 TOP3。

### 3.3 交互说明

- 点击任一功能卡片 → 跳转对应页面。
- 图表区域：可悬浮显示具体日期和正确率 tooltip。

---

## 四、错题列表页 `WrongQuestionListPage`

### 4.1 页面目标

- 让学生能够快速筛选和浏览自己的错题，并基于这些错题发起练习或调整掌握状态。

### 4.2 布局结构

- 顶部栏：
  - 标题：`错题复习`
  - 简短说明：`集中查看并复习你做错的题目`
- 筛选区（`WrongQuestionFilterBar`）：
  - 科目选择：下拉 `subject`
  - 知识点选择：级联/下拉 `knowledge`
  - 时间范围：快捷（`近7天`、`近30天`）+ 自定义日期范围
  - 题型选择：多选/下拉
  - 状态选择：`全部 / 未复习 / 复习中 / 已掌握`
  - 操作按钮：`查询`、`重置`
- 列表区（`WrongQuestionList`）：
  - 表头字段：
    - 选择框（多选）
    - 题目摘要
    - 科目
    - 知识点
    - 错误次数
    - 最近错题时间
    - 掌握状态（标签样式）
    - 操作（查看 / 标记）
  - 列表顶部批量操作区域：
    - 显示已选中数量：`已选择 X 道错题`
    - 按钮：`批量标记为已掌握`、`开始练习`
- 底部：
  - 分页组件。

### 4.3 交互细节

- 点击题目摘要：
  - 打开题目预览弹窗，展示完整题干和解析。
- 状态标签：
  - 样式区分明显，如：
    - 未复习：灰色
    - 复习中：蓝色
    - 已掌握：绿色
- 批量操作：
  - 当有选中项时，批量按钮可点击；否则置灰。
  - 批量标记需弹出确认对话框，提示影响的题目数量。
- 一键练习：
  - 无选中项时，可提供「按当前筛选条件生成 N 道错题小练习」入口（弹出选择题量的对话框）。

---

## 五、错题练习页 `WrongQuestionPracticePage`

### 5.1 页面目标

- 在统一做题体验基础上，为错题提供专门的练习入口。

### 5.2 布局 & 组件

- 主要使用通用组件 `ExercisePlayer`：
  - 顶部：练习标题（如 `错题练习（共 10 题）`）+ 返回按钮。
  - 中间：题干、选项/作答区域。
  - 底部：上一题/下一题按钮、进度条、提交/交卷按钮。

### 5.3 交互说明

- 返回行为：
  - 若未交卷，返回时需提示 `当前练习尚未完成，确定要退出吗？`
- 提交后：
  - 走通用判分流程，显示结果页：
    - 本次正确率
    - 已攻克错题数（如条件满足可提示）
  - 可提供按钮：
    - `查看本次错题`
    - `回到错题列表`

---

## 六、做题记录列表页 `ExerciseRecordListPage`

### 6.1 页面目标

- 提供学生全部做题历史的总览，支持按时间、科目等条件筛选。

### 6.2 布局结构

- 顶部栏：
  - 标题：`做题记录`
- 筛选区 `ExerciseRecordFilterBar`：
  - 科目下拉
  - 来源类型（练习 / 考试 / 作业）
  - 时间范围（近7天 / 近30天 / 自定义）
  - 排序方式下拉（时间 / 正确率 / 得分）
- 列表区 `ExerciseRecordList`：
  - 字段：
    - 时间（结束时间）
    - 名称（来源名称）
    - 科目
    - 题目总数
    - 正确数 / 正确率
    - 得分（如有）
    - 用时
    - 操作：`查看详情`
- 底部：分页。

### 6.3 交互细节

- 点击行或「查看详情」按钮 → 跳转 `/study/records/:id`。
- 列表行可使用轻微 hover 高亮增强可点击性。

---

## 七、做题记录详情页 `ExerciseRecordDetailPage`

### 7.1 页面目标

- 展示一次完整做题的概况与题目级表现，支持查看解析与快速操作错题。

### 7.2 布局结构

- 顶部概览卡片 `ExerciseRecordSummaryCard`：
  - 名称、科目
  - 开始 / 结束时间
  - 总用时
  - 题量
  - 正确率
  - 得分（若有）
- 中部题目列表 `ExerciseRecordQuestionList`：
  - 字段：
    - 序号
    - 题目摘要
    - 题型
    - 对/错状态（图标或颜色）
    - 得分（如有）
    - 操作：
      - `查看解析`
      - 若为错题：`加入错题本` 或 `查看错题状态`
- 底部（可选）：小图表 `ExerciseRecordMiniStats`：
  - 本次试卷的知识点分布柱状图
  - 题型分布饼图

### 7.3 交互细节

- 「查看解析」：
  - 弹出 `QuestionPreview` 对话框，展示完整题干、学生答案、标准答案、解析。
- 错题操作：
  - 若该题已是错题本成员，标明当前状态（未复习/复习中/已掌握）。
  - 若不是，可提供「加入错题本」按钮。

---

## 八、学习统计页 `StudyStatsPage`

### 8.1 页面目标

- 以图表形式展示学生在一定时间范围内的整体学习表现与薄弱点。

### 8.2 布局结构

- 顶部 `StatsFilterBar`：
  - 时间范围：`近7天 / 近30天 / 自定义`
  - 科目选择（全部/单科）
- 主体图表区域：
  - 区块一：`AccuracyTrendChart`
    - 折线图：时间维度上的正确率或平均得分。
  - 区块二：`SubjectDistributionChart`
    - 柱状图：按科目或主要维度的正确率/错题数。
  - 区块三：`QuestionTypeChart`
    - 饼图/环形图：题型分布及正确率。
  - （扩展）区块四：`KnowledgeHeatmap`
    - 知识点 × 时间的热力图。

### 8.3 交互细节

- 图表需支持：
  - 悬浮 tooltip（展示精确数据）。
  - 图例控制（显示/隐藏某条数据线）。
- 移动端适配：
  - 图表区域可使用垂直排列 + 横向滚动方案，避免一次展示过多内容。

---

## 九、样式与复用建议

### 9.1 公共样式文件

- 建议在前端项目中新增（或扩展）公共样式文件，例如：
  - `styles/study/index.scss`
- 统一抽取以下样式：
  - 学习模块页面容器样式（边距、背景色）。
  - 卡片布局（首页入口卡片、统计卡片）。
  - 列表标题、空状态组件样式。
  - 状态标签（未复习/复习中/已掌握）的颜色与形状。

### 9.2 无障碍与响应式

- 所有可点击元素应有足够点击区域（推荐至少 40px 高度）。
- 颜色对比度满足基本可读要求，状态不要仅依赖颜色区分（可加文字/图标）。
- 移动端优先考虑竖屏单列布局，尽量减少横向滚动。

---

## 十、前端实现建议

- 将各页面拆分为 **页面组件 + 业务子组件 + 通用组件**，做到复用最大化、逻辑清晰。
- 对接口数据的调用和状态管理，统一在页面级（或 store）处理，子组件通过 props 接收数据与回调。
- 复杂交互（如批量操作、图表筛选）在实现时务必增加注释，便于后续维护与迭代。


